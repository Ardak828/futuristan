<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>futuristan</title>
    <link rel="icon" type="image/png" href="images/Futuristan-logo-small-fav.png" >
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Custom styles for Three.js container and fonts */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;600;800&display=swap');

        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            background: #000;
            font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            color: #fff;
            overflow: hidden;
        }

        canvas { display: block; width: 100%; height: 100%; }
        
        /* Define CSS Variables for modal/panel consistency */
        :root {
            --panel: #000000;
            --muted: #9ca3af;
            --accent: #4f46e5;
        }

        #projectModal .panel { background: var(--panel); }
        #projectModal .close-btn { color: var(--muted); }
        #projectModal .close-btn:hover { color: #fff; background: rgba(255,255,255,0.03); }
        #projectModal .panel h3 { color: #fff; }
        #projectModal .panel p.category { color: #9aa0ff; }
        .image-card { background: #0f1724; border: 1px solid rgba(255,255,255,0.03); }
        .tag { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.02); }
        .color-indicator { color: var(--muted); }

        /* Custom scrollbar for Journal */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }
    </style>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
</head>
<body>
    <div id="logo-container" class="fixed top-1 right-5 z-50 p-2 md:top-8 md:right-8">
        <img src="images/Asset 7@4x.png" class="h-12 md:h-16 w-auto rounded-lg shadow-xl">
    </div>

    <div id="instructions" class="fixed top-10 left-1/2 -translate-x-1/2 z-40 bg-white/10 text-gray-300 p-2 rounded-xl font-semibold text-sm backdrop-blur-sm transition-opacity">
        <div class="font-extrabold text-[#dfe3ff]">The Universe of Decolonial Futurisms</div>
        <div class="text-xs mt-1 text-gray-300">Drag to orbit — Click / Tap a sphere to open details</div>
    </div> 

    <div id="top-nav-container" class="fixed top-4 left-4 z-40 flex gap-3 items-center">
        <div id="filter-group">
            <select id="category-filter" aria-label="Filter projects"
                class="p-2 rounded-xl border border-white/10 bg-black/80 text-white font-bold text-sm min-w-[12rem] focus:ring-2 focus:ring-indigo-500 focus:outline-none transition">
            </select>
        </div>
        <button id="journal-btn" class="p-2 px-4 rounded-xl border border-white/10 bg-white/5 text-white font-bold text-sm hover:bg-white/10 transition">
            Journal
        </button>
        <button id="about-btn" class="p-2 px-4 rounded-xl border border-white/10 bg-white/5 text-white font-bold text-sm hover:bg-white/10 transition">
            About | Contact
        </button>
    </div>

    <div id="label-container" style="pointer-events:none;"></div>

    <div id="aboutContent" class="absolute inset-0 z-30 flex items-center justify-center p-4 md:p-8 hidden">
        <div class="max-w-3xl w-full bg-[#0a0a0a] p-8 md:p-12 rounded-2xl shadow-2xl border border-white/10 backdrop-blur-sm max-h-[90vh] overflow-y-auto custom-scrollbar">
            <h2 class="text-4xl font-extrabold text-indigo-400 mb-6">About Futuristan Lab</h2>
            <p class="text-gray-300 mb-4 text-lg leading-relaxed">
                Futuristan Lab is a laboratory for new media and the research of decolonial perspectives on the future...
                </p>
            <button id="backToNetworkBtn" class="mt-4 py-2 px-6 rounded-xl border-none cursor-pointer font-extrabold text-base bg-indigo-600 text-white hover:bg-indigo-700 transition">
                Back to Network View
            </button>
        </div>
    </div>

    <div id="journalContent" class="absolute inset-0 z-30 flex items-center justify-center p-4 md:p-8 hidden">
        <div class="max-w-6xl w-full bg-[#0a0a0a] rounded-2xl shadow-2xl border border-white/10 backdrop-blur-sm h-[85vh] flex overflow-hidden">
            <div class="w-full md:w-1/3 border-r border-white/10 flex flex-col bg-black/40">
                <div class="p-6">
                    <h2 class="text-2xl font-extrabold text-indigo-400">Journal</h2>
                    <p class="text-xs text-gray-500 mt-1 uppercase tracking-widest">Selected Articles</p>
                </div>
                <div class="flex-1 overflow-y-auto p-4 custom-scrollbar">
                    <ul id="journal-nav-list" class="space-y-2">
                        </ul>
                </div>
                <div class="p-4 border-t border-white/5">
                    <button id="journalBackBtn" class="w-full py-2 px-4 rounded-xl border border-white/10 text-xs font-bold text-gray-400 hover:bg-white/5 transition flex items-center justify-center gap-2">
                        ← Back to Network
                    </button>
                </div>
            </div>
            <div id="journal-article-display" class="hidden md:block w-2/3 p-8 md:p-12 overflow-y-auto text-gray-300 custom-scrollbar bg-black/20">
                <div id="journal-placeholder" class="h-full flex items-center justify-center text-gray-500 italic text-center">
                    Select an article from the left to begin reading.
                </div>
            </div>
        </div>
    </div>

    <div id="projectModal" role="dialog" aria-modal="true" class="fixed inset-0 z-50 flex items-center justify-center overflow-y-auto hidden">
        <div class="backdrop absolute inset-0 bg-gray-900/60" id="modalBackdrop"></div>
        <button id="prevProjectBtn" class="fixed left-4 md:left-8 top-1/2 -translate-y-1/2 p-4 z-[51] rounded-full bg-white/5 hover:bg-white/10 text-white transition ring-2 ring-white/10">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 19l-7-7 7-7"></path></svg>
        </button>
        <div class="panel relative w-11/12 max-w-xl rounded-xl border border-white/5 shadow-2xl p-6 text-gray-100 m-8 z-50 max-h-[90vh] overflow-y-auto custom-scrollbar">
            <button class="close-btn absolute top-3 right-3 p-1.5 rounded-full" id="modalCloseBtn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="modal-project-details"></div>
            <div class="modal-footer mt-4">
                <button id="fullProjectBtn" class="w-full py-3 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700 transition font-bold">View Full Project</button>
                <p id="actionMessage" class="mt-2 text-gray-400 text-sm hidden">Opening project...</p>
            </div>
        </div>
        <button id="nextProjectBtn" class="fixed right-4 md:right-8 top-1/2 -translate-y-1/2 p-4 z-[51] rounded-full bg-white/5 hover:bg-white/10 text-white transition ring-2 ring-white/10">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 5l7 7-7 7"></path></svg>
        </button>
    </div>

    <script>
    /* ========== JOURNAL DATA ========== */
    const JOURNAL_ARTICLES = [
        {
            id: 0,
            title: "The Future of Decoloniality",
            content: `
                <h3 class='text-3xl font-bold text-white mb-6'>The Future of Decoloniality</h3>
                <p class='mb-4 leading-relaxed'>This article explores the shifting landscapes of decolonial thought in the age of rapid technological advancement...</p>
                <img src="images/journal-1.jpg" class="w-full rounded-xl my-6 border border-white/10" onerror="this.style.display='none'">
                <p class='leading-relaxed'>Beyond mere aesthetics, we look at how sovereignty is redefined through digital tools.</p>
            `
        },
        {
            id: 1,
            title: "Algorithmic Sovereignty",
            content: `
                <h3 class='text-3xl font-bold text-white mb-6'>Algorithmic Sovereignty</h3>
                <p class='mb-4 leading-relaxed'>How can local knowledge be encoded into the algorithms that govern our digital futures?</p>
                <div class='p-4 bg-indigo-600/10 border-l-4 border-indigo-500 my-6 italic'>
                    "The code is the new territory for decolonial struggle."
                </div>
                <p class='leading-relaxed'>A deep dive into Kazakh cosmology and computational logic.</p>
            `
        }
    ];

    /* ========== EXISTING CORE DATA ========== */
    const ARTWORKS = [
        { id: 0, title: "Neo-Tengri", category: "Virtual Reality", url: "https://ardakmukanova.com/neotengri", description: "Neo Tengri is a speculative VR project...", image_path: "images/0000_Layer-Comp-1.png" },
        // ... (remaining ARTWORKS from your original file)
    ];

    const EDGES = [
        { from: 0, to: 1 }, { from: 1, to: 5 }, { from: 2, to: 6 },
        // ... (remaining EDGES)
    ];

    /* ========== THREE.JS STATE ========== */
    let scene, camera, renderer, controls, canvasElement, raycaster, mouse;
    let nodeGroup, lineGroup, starsMesh, nodes = [], edges = [];
    let isModalOpen = false, currentView = 'network';
    
    // UI References
    let aboutContent, journalContent, instructions, filterGroup, aboutBtn, journalBtn, journalNavList, articleDisplay;

    function init() {
        scene = new THREE.Scene();
        scene.background = new THREE.Color(0x000000);
        camera = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 1, 2000);
        camera.position.set(0, 0, 200);
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);
        canvasElement = renderer.domElement;
        controls = new THREE.OrbitControls(camera, canvasElement);
        
        nodeGroup = new THREE.Group();
        lineGroup = new THREE.Group();
        scene.add(nodeGroup, lineGroup);
        raycaster = new THREE.Raycaster();
        mouse = new THREE.Vector2();

        // UI references
        aboutContent = document.getElementById('aboutContent');
        journalContent = document.getElementById('journalContent');
        instructions = document.getElementById('instructions');
        filterGroup = document.getElementById('filter-group');
        aboutBtn = document.getElementById('about-btn');
        journalBtn = document.getElementById('journal-btn');
        journalNavList = document.getElementById('journal-nav-list');
        articleDisplay = document.getElementById('journal-article-display');
        
        // Event listeners
        aboutBtn.onclick = () => showView('about');
        journalBtn.onclick = () => showView('journal');
        document.getElementById('backToNetworkBtn').onclick = () => showView('network');
        document.getElementById('journalBackBtn').onclick = () => showView('network');
        document.getElementById('modalCloseBtn').onclick = closeProjectModal;
        window.addEventListener('resize', onWindowResize);

        renderJournalNav();
        // createBackgroundStars(), createGalaxyNetwork(), etc... (omitted for brevity, keep your original functions)
        animate();
    }

    function showView(viewName) {
        currentView = viewName;
        // Hide all overlays
        aboutContent.classList.add('hidden');
        journalContent.classList.add('hidden');
        instructions.classList.add('hidden');
        filterGroup.classList.add('hidden');
        
        if (viewName === 'network') {
            instructions.classList.remove('hidden');
            filterGroup.classList.remove('hidden');
        } else if (viewName === 'about') {
            aboutContent.classList.remove('hidden');
        } else if (viewName === 'journal') {
            journalContent.classList.remove('hidden');
        }
    }

    function renderJournalNav() {
        journalNavList.innerHTML = JOURNAL_ARTICLES.map(article => `
            <li>
                <button onclick="displayArticle(${article.id})" 
                    class="journal-nav-item text-left w-full p-4 rounded-xl hover:bg-indigo-600/20 text-gray-400 hover:text-indigo-300 transition-all duration-300 border border-transparent hover:border-indigo-500/30 group">
                    <span class="block text-xs text-indigo-500/50 mb-1 font-mono">0${article.id + 1}</span>
                    <span class="font-bold text-sm tracking-wide uppercase">${article.title}</span>
                </button>
            </li>
        `).join('');
    }

    function displayArticle(id) {
        const article = JOURNAL_ARTICLES.find(a => a.id === id);
        if (article) {
            articleDisplay.classList.remove('hidden');
            articleDisplay.innerHTML = `
                <div class="animate-in fade-in slide-in-from-bottom-4 duration-700">
                    ${article.content}
                </div>
            `;
            // Highlight active button
            document.querySelectorAll('.journal-nav-item').forEach((btn, idx) => {
                btn.classList.toggle('bg-indigo-600/10', idx === id);
                btn.classList.toggle('text-white', idx === id);
                btn.classList.toggle('border-indigo-500/40', idx === id);
            });
        }
    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    }

    function animate() {
        requestAnimationFrame(animate);
        if (currentView === 'network') {
            controls.update();
            renderer.render(scene, camera);
        }
    }

    function closeProjectModal() {
        isModalOpen = false;
        document.getElementById('projectModal').classList.add('hidden');
    }

    init();
    </script>
</body>
</html>
